import{_ as w,r as l,g as C,o as $,c as a,b as e,F as v,e as y,t as i,a as p,f as o,n as f}from"./app-DWTXrR1v.js";const j={class:"library-container p-4"},F={class:"flex justify-between items-center mb-6"},L={class:"flex gap-4"},S=["onClick"],T={key:0,class:"flex justify-center items-center h-64"},B={key:1,class:"text-center text-red-500 py-8"},E={key:2,class:"text-center py-8 text-gray-500"},D={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},M={class:"relative group"},q=["src"],z={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 rounded-md flex items-center justify-center"},I=["onClick"],N={class:"track-info"},V={class:"font-semibold text-lg truncate dark:text-white"},A={class:"text-gray-600 dark:text-gray-400 truncate"},G={class:"track-controls mt-2 flex justify-between items-center"},H={class:"text-sm text-gray-500 dark:text-gray-400"},J=["onClick"],K={__name:"Library",setup(O){const c=l([]),d=l(!0),u=l(null),h=["Все","Треки","Альбомы","Исполнители"],n=l("Все"),g=C(()=>n.value==="Все"?c.value:c.value.filter(t=>{switch(n.value){case"Треки":return!t.is_album;case"Альбомы":return t.is_album;case"Исполнители":return t.is_artist;default:return!0}})),m=async()=>{try{d.value=!0;const t=await p.get("/api/library");c.value=t.data}catch(t){u.value="Ошибка при загрузке библиотеки",console.error("Error loading library:",t)}finally{d.value=!1}},b=t=>{emit("play-track",t)},x=async t=>{try{await p.post(`/api/tracks/${t.id}/toggle-favorite`),t.is_favorite=!t.is_favorite}catch(r){console.error("Error toggling favorite:",r)}},k=t=>{const r=Math.floor(t/60),s=t%60;return`${r}:${s.toString().padStart(2,"0")}`};return $(()=>{m()}),(t,r)=>(o(),a("div",j,[e("div",F,[r[0]||(r[0]=e("h2",{class:"text-2xl font-bold"},"Моя библиотека",-1)),e("div",L,[(o(),a(v,null,y(h,s=>e("button",{key:s,onClick:_=>n.value=s,class:f(["px-4 py-2 rounded-full transition-colors",n.value===s?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"])},i(s),11,S)),64))])]),d.value?(o(),a("div",T,r[1]||(r[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"},null,-1)]))):u.value?(o(),a("div",B,i(u.value),1)):g.value.length===0?(o(),a("div",E," Нет сохраненных треков ")):(o(),a("div",D,[(o(!0),a(v,null,y(g.value,s=>(o(),a("div",{key:s.id,class:"track-card bg-white dark:bg-gray-800 p-4 rounded-lg shadow hover:shadow-lg transition-all duration-300"},[e("div",M,[e("img",{src:s.cover_url||"/default-cover.png",class:"w-full aspect-square object-cover rounded-md mb-3",alt:"Track cover"},null,8,q),e("div",z,[e("button",{onClick:_=>b(s),class:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-primary text-white p-3 rounded-full hover:scale-110 transform transition"},r[2]||(r[2]=[e("i",{class:"fas fa-play"},null,-1)]),8,I)])]),e("div",N,[e("h3",V,i(s.title),1),e("p",A,i(s.artist),1)]),e("div",G,[e("span",H,i(k(s.duration)),1),e("button",{onClick:_=>x(s),class:"text-gray-400 hover:text-primary transition-colors"},[e("i",{class:f(["fas",s.is_favorite?"fa-heart text-primary":"fa-heart"])},null,2)],8,J)])]))),128))]))]))}},Q=w(K,[["__scopeId","data-v-c242c0af"]]);export{Q as default};
